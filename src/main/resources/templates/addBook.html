<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Add Book</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" type="text/css"
	href="webjars/bootstrap/3.3.7/css/bootstrap.min.css" />

<link rel="stylesheet" th:href="@{/css/addBook.css}" />
<style type="text/css">
#image_container {
	display: inline-block;
	width: 20rem;
	height: 20rem;
	position: relative;
	background-image: url(/img/book1.jpg);
	background-repeat: no-repeat;
	background-size: cover;
}
</style>
</head>
<body>
	<div th:include="TabTemplate::UpperTab"></div>

	<main role="main" class="App-main">
	<div class="Topstory">
		<div class="Topstory-container">
			<div class="Topstory-mainColumn">
				<div class="Card Topstory-noMarginCard Topstory-tabCard"
					style="height: 30px">
					<a style="font-size: 15px;"> >>发布新书</a>
				</div>
				<div id="TopstoryContent" class="Topstory-content">
					<div class="Topstory-recommend" style="background: #FFFFFF;">
						<div class="">
							<div class="left-part" style="float: left">
								<form enctype="multipart/form-data" method="post"
									action="/addBookResult">

									<input type="hidden" name="uId" th:attr="value=${user.uId}" />
									<div class="contentDiv">
										<label class="tradeLabel">书籍名称：</label> <input
											class="newBookInput" type="text" name="bookName">
									</div>
									<div class="contentDiv">
										<label class="tradeLabel">出版社：</label> <input
											class="newBookInput" type="text" name="publisher">
									</div>
									<div class="contentDiv">
										<label class="tradeLabel">书籍类型：</label> <input
											class="newBookInput" type="text" name="bookType">
									</div>
									<div class="contentDiv">
										<label class="tradeLabel">作者：</label> <input
											class="newBookInput" type="text" name="author">
									</div>
									<div class="contentDiv">
										<label class="tradeLabel">新旧程度：</label> <input
											class="newBookInput" type="text" name="newDegree">
									</div>
									<div class="contentDiv">
										<label class="tradeLabel">所在地：</label> <input
											class="newBookInput" type="text" name="address">
									</div>
									<div class="contentDiv">
										<label class="tradeLabel">所需积分：</label> <input
											class="newBookInput" type="text" name="price">
									</div>
									<div class="contentDiv">
										<label class="tradeLabel">上传图片：</label> <input
											class="newBookInput" type="file" name="file" accept="image/*"
											id="image_file">
									</div>

									<div class="contentDiv">
										<input type="submit"
											style="border-style: none; color: green; margin-left: 10px; font-size: 15px;"
											value="发布">
									</div>

								</form>
							</div>


							<div class="right-part" style="float: right">

								<div class="contentDiv" id="image_container"
									style="background-image: url(/img/book1.jpg)"></div>


							</div>








						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</main>

	<script type="text/javascript"
		src="webjars/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script th:inline="javascript">
		function search() {
			location.href = "/searchAll?uId="
					+ document.getElementById("hidden_uId").value + "&key="
					+ document.getElementById("Popover1-toggle").value;
		};

		function myMessage() {
			location.href = "/myMessage?uId="
					+ document.getElementById("hidden_uId").value;
		}
	</script>
	<script type="text/javascript">
		var preview = document.querySelector('#image_container');
		var eleFile = document.querySelector('#image_file');
		eleFile.addEventListener('change', function() {
			var file = this.files[0];
			// 确认选择的文件是图片                
			if (file.type.indexOf("image") == 0) {
				var reader = new FileReader();
				reader.readAsDataURL(file);
				reader.onload = function(e) {
					// 图片base64化
					var newUrl = this.result;
					preview.style.backgroundImage = 'url(' + newUrl + ')';
				};
			}
		});
	</script>
</body>
</html>
